<section class="perfil-risco-page">
  <div class="page-header">
    <h1>Perfil de Risco</h1>
    <p class="subtitle">Seu perfil é calculado automaticamente com base nos seus investimentos</p>
  </div>

  <div *ngIf="isLoading" class="loading-container">
    <p>Carregando seu perfil...</p>
  </div>

  <!-- Pontuação Indicator -->
  <div *ngIf="!isLoading" class="pontuacao-section">
    <mat-card class="pontuacao-card" elevation="5">
      <mat-card-header>
        <mat-card-title class="pontuacao-title">Seu nível de risco da carteira</mat-card-title>
      </mat-card-header>
      
      <mat-card-content>
        <div class="pontuacao-score">
          <span class="score-number" [style.color]="getRiskColor()">{{ displayedScore }}</span>
          <span class="score-max">/100</span>
        </div>

        <div class="pontuacao-progress">
          <div class="progress-bar-container">
            <div class="progress-bar-gradient">
              <div class="progress-fill" [style.width.%]="userPontuacao"></div>
            </div>
          </div>
          <div class="progress-labels">
            <span class="label-min">0</span>
            <span class="label-max">100</span>
          </div>
        </div>

        <div class="pontuacao-level">
          <mat-chip [style.background-color]="getRiskColor()" [style.color]="'white'">
            {{ getRiskCategory() }}
          </mat-chip>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Profile Cards (Read-only) -->
  <div *ngIf="!isLoading" class="profiles-grid">
    <mat-card 
      *ngFor="let profile of profiles; let i = index" 
      class="profile-card"
      [class.current]="i === currentIndex">
      
      <mat-card-header>
        <div mat-card-avatar class="card-icon" [style.background]="profile.color">
          <span class="icon">{{ profile.icon }}</span>
        </div>
        <mat-card-title class="card-title">{{ profile.title }}</mat-card-title>
      </mat-card-header>
      
      <mat-card-content>
        <div class="card-description">
          <p>{{ profile.description }}</p>
        </div>
        
        <div class="card-features">
          <div class="feature-item" *ngFor="let feature of profile.features">
            <mat-icon class="check-icon">check_circle</mat-icon>
            <span>{{ feature }}</span>
          </div>
        </div>

        <div class="card-risk-indicator">
          <span class="label">Nível de Risco:</span>
          <div class="risk-bars">
            <div 
              *ngFor="let bar of [1,2,3,4,5]" 
              class="bar"
              [class.filled]="bar <= profile.riskLevel"></div>
          </div>
        </div>
      </mat-card-content>

      <mat-card-actions *ngIf="i === currentIndex">
        <button mat-raised-button color="primary">
          <mat-icon>check</mat-icon> Seu Perfil Atual
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</section>
