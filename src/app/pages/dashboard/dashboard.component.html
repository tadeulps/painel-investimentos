<section class="dashboard-page">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <p>Carregando seu dashboard...</p>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!isLoading && userProfile" class="dashboard-content">
    
    <!-- 1ï¸âƒ£ Resumo do Investidor -->
    <div class="investor-summary">
      <div class="welcome-section">
        <h1 class="greeting">{{ getGreeting() }}, {{ userProfile.nome }}!</h1>
        <p class="subtitle">Acompanhe seus investimentos em tempo real</p>
      </div>

      <div class="risk-profile-badge" [class]="'profile-' + getRiskProfileClass()">
        <span class="profile-icon">{{ getRiskProfileIcon() }}</span>
        <div class="profile-info">
          <span class="profile-label">Perfil de Risco</span>
          <span class="profile-name">{{ userProfile.perfilRisco.name }}</span>
        </div>
      </div>
    </div>

    <!-- ðŸ“Š Indicadores RÃ¡pidos -->
    <div class="quick-indicators">
      <div class="indicator-card investments">
        <div class="card-icon">ðŸ’°</div>
        <div class="card-content">
          <span class="card-label">Valor Total Investido</span>
          <span class="card-value">{{ summary.valorTotalInvestido | currency:'BRL' }}</span>
        </div>
      </div>

      <div class="indicator-card return">
        <div class="card-icon">ðŸ“ˆ</div>
        <div class="card-content">
          <span class="card-label">Rentabilidade Acumulada</span>
          <span class="card-value" [class.positive]="summary.rentabilidadeAcumulada > 0" [class.negative]="summary.rentabilidadeAcumulada < 0">
            {{ summary.rentabilidadeAcumulada | currency:'BRL' }}
          </span>
          <span class="card-percentage" *ngIf="summary.valorTotalInvestido > 0">
            {{ (summary.rentabilidadeAcumulada / summary.valorTotalInvestido * 100) | number:'1.2-2' }}%
          </span>
        </div>
      </div>

      <div class="indicator-card total">
        <div class="card-icon">ðŸ’Ž</div>
        <div class="card-content">
          <span class="card-label">Valor Atual Total</span>
          <span class="card-value">{{ summary.valorAtualTotal | currency:'BRL' }}</span>
        </div>
      </div>

      <div class="indicator-card count">
        <div class="card-icon">ðŸ“Š</div>
        <div class="card-content">
          <span class="card-label">Investimentos Ativos</span>
          <span class="card-value">{{ summary.numeroInvestimentos }}</span>
        </div>
      </div>
    </div>

    <!-- ðŸ“ˆ EvoluÃ§Ã£o dos Investimentos -->
    <app-investment-evolution-chart 
      *ngIf="investments.length > 0" 
      [investments]="investments">
    </app-investment-evolution-chart>

    <!-- ðŸ“Š DistribuiÃ§Ã£o por Tipo de Produto -->
    <app-product-distribution-chart 
      *ngIf="investments.length > 0" 
      [investments]="investments">
    </app-product-distribution-chart>

    <!-- ðŸ“Š HistÃ³rico do Perfil de Risco -->
    <app-risk-history-chart 
      *ngIf="investments.length > 0" 
      [investments]="investments">
    </app-risk-history-chart>

    <!-- ðŸ’¼ Lista de Investimentos -->
    <app-investments-list 
      *ngIf="investments.length > 0" 
      [investments]="investments">
    </app-investments-list>

    <!-- Empty State -->
    <div *ngIf="investments.length === 0" class="empty-state">
      <div class="empty-icon">ðŸ’¼</div>
      <h2>VocÃª ainda nÃ£o possui investimentos</h2>
      <p>Comece agora explorando nossos produtos e simulando investimentos!</p>
      <div class="empty-actions">
        <a routerLink="/produtos" class="btn-primary">Ver Produtos</a>
        <a routerLink="/simulacao" class="btn-secondary">Simular Investimento</a>
      </div>
    </div>

  </div>
</section>
