<mat-card class="investments-list-section">
  <mat-card-header>
    <mat-card-title class="section-title">
      <mat-icon>account_balance_wallet</mat-icon>
      Meus Investimentos
    </mat-card-title>
  </mat-card-header>
  
  <mat-card-content>
    <div *ngIf="investments.length === 0" class="empty-message">
      <mat-icon>inbox</mat-icon>
      <p>Nenhum investimento encontrado</p>
    </div>

    <div *ngIf="investments.length > 0" class="investments-grid">
      <mat-card *ngFor="let investment of displayedInvestments" class="investment-card">
        <!-- Card Header -->
        <mat-card-header class="card-header">
          <div class="product-info">
            <mat-card-title class="product-name">{{ investment.produto?.nome }}</mat-card-title>
            <mat-card-subtitle class="product-type">{{ investment.produto?.tipo }}</mat-card-subtitle>
          </div>
          <mat-chip-set class="risk-badge" [class]="'risk-' + getRiskClass(investment.produto?.risco || 'Médio')">
            <mat-chip>
              <mat-icon>{{ getRiskIcon(investment.produto?.risco || 'Médio') }}</mat-icon>
              {{ investment.produto?.risco }}
            </mat-chip>
          </mat-chip-set>
        </mat-card-header>

        <!-- Card Body -->
        <mat-card-content class="card-body">
        <div class="info-row">
          <div class="info-item">
            <span class="info-label">Investido</span>
            <span class="info-value">{{ investment.valor | currency:'BRL' }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">Valor Atual</span>
            <span class="info-value highlight">{{ investment.valorAtual | currency:'BRL' }}</span>
          </div>
        </div>

        <div class="info-row">
          <div class="info-item">
            <span class="info-label">Rentabilidade</span>
            <span class="info-value" [class.positive]="calculateReturn(investment) > 0" [class.negative]="calculateReturn(investment) < 0">
              {{ calculateReturn(investment) | currency:'BRL' }}
              <span class="percentage">({{ calculateReturnPercentage(investment) | number:'1.2-2' }}%)</span>
            </span>
          </div>
          <div class="info-item">
            <span class="info-label">Taxa Anual</span>
            <span class="info-value">{{ investment.produto?.taxaAnual }}% a.a.</span>
          </div>
        </div>

        <div class="info-row">
          <div class="info-item">
            <span class="info-label">Data Início</span>
            <span class="info-value">{{ investment.dataInicio | date:'dd/MM/yyyy' }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">Prazo</span>
            <span class="info-value">{{ investment.prazoMeses }} meses ({{ getMonthsRemaining(investment) }} restantes)</span>
          </div>
        </div>

        <div class="info-row">
          <div class="info-item full-width">
            <span class="info-label">Liquidez</span>
            <span class="info-value">{{ investment.produto?.liquidez }}</span>
          </div>
        </div>
        </mat-card-content>

        <!-- Card Footer -->
        <mat-card-actions class="card-footer">
          <button mat-raised-button color="primary" class="btn-details" routerLink="/simulacao" [queryParams]="{ productId: investment.produto?.id }">
            Ver Detalhes
          </button>
        </mat-card-actions>
      </mat-card>
    </div>

    <!-- Ver Mais Button -->
    <div *ngIf="hasMore" class="show-more-container">
      <button mat-stroked-button color="primary" class="btn-show-more" (click)="toggleShowAll()">
        <span *ngIf="!showAll">Ver Mais ({{ investments.length - displayLimit }} restantes)</span>
        <span *ngIf="showAll">Ver Menos</span>
        <mat-icon>{{ showAll ? 'expand_less' : 'expand_more' }}</mat-icon>
      </button>
    </div>
  </mat-card-content>
</mat-card>
